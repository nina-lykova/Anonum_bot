## Анонимный Чат-Бот в Telegram

Этот проект представляет собой простого анонимного чат-бота для Telegram, написанного на Python с использованием библиотеки pyTelegramBotAPI. Бот позволяет пользователям находить случайных собеседников и общаться с ними, сохраняя анонимность.

▌Функциональность

Бот предоставляет следующие возможности:

•   /start: Приветствие пользователя и добавление его в очередь поиска собеседника.
•   /search: Добавление пользователя в очередь поиска собеседника.
•   /next: Завершение текущего чата и добавление пользователя в очередь поиска нового собеседника.
•   /stop: Завершение текущего чата.
•   /report: Отправка жалобы на собеседника с указанием причины (реклама, продажа, насилие, оскорбление, мошенничество).
•   Анонимный обмен сообщениями: Пересылка текстовых сообщений между пользователями, находящимися в анонимном чате.

▌Принцип работы

1.  Пользователь отправляет /start или /search: Бот добавляет user_id пользователя в очередь waiting_queue.
2.  Функция check_queue: Периодически (каждую секунду) проверяет, есть ли в очереди waiting_queue как минимум два пользователя.
3.  Соединение пользователей: Если в очереди есть два пользователя, их user_id извлекаются из очереди, и между ними создается "пара" в словаре user_pairs. Обоим пользователям отправляется сообщение о том, что они соединены с анонимным собеседником.
4.  Пересылка сообщений: Все текстовые сообщения, отправленные пользователем, пересылаются его собеседнику, user_id которого находится в словаре user_pairs.
5.  Завершение чата:
    •   При отправке команды /stop или /next, бот находит user_id собеседника в словаре user_pairs, отправляет обоим пользователям сообщение о завершении чата и удаляет их user_id из словаря user_pairs.
    •   При использовании команды /next пользователь также добавляется в очередь waiting_queue для поиска нового собеседника.
6.  Отправка жалобы: При отправке команды /report пользователю предлагается выбрать причину жалобы. После выбора причины, бот отправляет уведомление о получении жалобы (в текущей версии жалобы нигде не сохраняются и не обрабатываются).

▌Используемые библиотеки

•   pyTelegramBotAPI: Основная библиотека для работы с Telegram Bot API.
•   threading: Модуль для работы с потоками, позволяет выполнять несколько задач одновременно (проверка очереди и обработка сообщений).
•   queue: Модуль для создания очередей, используется для хранения user_id в ожидании собеседника.
•   logging: Модуль для логирования событий, используется для записи информации о работе бота в файл.

▌Настройка и запуск

1.  Установите необходимые библиотеки:

    
    pip install pyTelegramBotAPI
    

2.  Создайте файл config.py: В этом файле укажите токен вашего бота, полученный от BotFather:

    
    API_TOKEN = "YOUR_BOT_TOKEN"
    

3.  Запустите бота:

    
    python bot.py
    
